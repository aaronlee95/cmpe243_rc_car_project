#include "unity.h"
#include "shortest_path.h"

#define INF            9999.0

void test_get_radians(void)
{
    TEST_ASSERT_EQUAL_FLOAT(get_radians(37.338169), 0.651674);
    TEST_ASSERT_EQUAL_FLOAT(get_radians(-121.880589), -2.12722);
    TEST_ASSERT_EQUAL_FLOAT(get_radians(37.337542), 0.651663);
    TEST_ASSERT_EQUAL_FLOAT(get_radians(-121.879829), -2.127204);
    TEST_ASSERT_EQUAL_FLOAT(get_radians(32.123042), 0.560652);
}

void test_dist_between_two_points(void)
{
    gps_t A, B, C, D, E, F, G, H, I, J, K, L;

    A.latitude = 37.338169;
    A.longitude = -121.880589;
    B.latitude = 37.708603;
    B.longitude = -122.469994;
    C.latitude = 52.2296756;
    C.longitude = 21.0122287;
    D.latitude = 52.406374;
    D.longitude = 16.925168;
    E.latitude = 37.337786;
    E.longitude = -121.880200;
    F.latitude = 37.337542;
    F.longitude = -121.880017;
    G.latitude = 37.337301;
    G.longitude = -121.879829;
    H.latitude = 37.338169;
    H.longitude =  -121.880589;
    I.latitude = 37.335406;
    I.longitude = -121.879121;
    J.latitude = 37.335643;
    J.longitude = -121.884804;
    K.latitude = 37.336714;
    K.longitude = -121.881625;
    L.latitude = 37.335580;
    L.longitude = -121.884990;

    //  dist_between_two_points: Final product :distance = R * b;
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(A, B), 66.3205);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(C, D), 278.458);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(E, F), 0.0315891);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(G, H), 0.117601);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(H, G), 0.117601);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(I, J), 0.503129);
    // TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(K, L), 0.304616);               // Same as Line 96 Expectation 

    //  dist_between_two_points: Final product :distance = R * b * 1000;
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(A, B), 66.3205);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(C, D), 278.458);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(E, F), 0.0316073);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(G, H), 0.11791);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(H, G), 0.11791);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(I, J), 0.503206);
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(K, L), 0.323205);               // Same as Line 96 Expectation 
}

void test_find_min(void)
{
    TEST_ASSERT_EQUAL(find_min(66.3, 120.2), 66.3);
    TEST_ASSERT_EQUAL(find_min(0.023, 0.0021), .0021);
}

void test_return_closest_node(void)
{
    gps_t src1[100] = {0};
    src1[0].latitude = 37.336714;
    src1[0].longitude = -121.881625;              //General Eng office - ENGR
    src1[1].latitude = 37.337442;
    src1[1].longitude = -121.879760;              //Chase ATM
    src1[2].latitude = 37.334917;
    src1[2].longitude = -121.877405;              // Village Market
    
    gps_t school[100] = {0};
    school[0].latitude = 37.335580;
    school[0].longitude = -121.884990;            // MLK LIBRARY
    school[1].latitude = 37.332795;
    school[1].longitude = -121.884721;            //Science Building 
    school[2].latitude = 37.335273;
    school[2].longitude = -121.883252;            //Tower Hall
    school[3].latitude = 37.337386;
    school[3].longitude = -121.882228;            // EE Dept - ENGR

    gps_t src2[10] = {0};
    src2[0].latitude = 37.335278;
    src2[0].longitude = -121.880102;              // Event Center
    src2[1].latitude = 37.333201;
    src2[1].longitude = -121.879913;              // Police dept
    src2[2].latitude = 37.332675;
    src2[2].longitude = -121.882278;              // Duncan Hall
    src2[3].latitude = 37.333531;
    src2[3].longitude = -121.8881655;             // MacQuarrie hall
    src2[4].latitude = 37.336130;
    src2[4].longitude = -121.886044;              // Flames Eatery

    // printf("test 1:\n");
    // printf("school_lat: %f, school_long: %f, source1_lat: %f, source1_long: %f \n ", school[0].latitude, school[0].longitude, src1[0].latitude, src1[0].longitude);
    // printf("Distance between the two points: %f\n", dist_between_two_points(src1[0], school[0]));
    // printf("test 2:\n");
    // printf("school_lat: %f, school_long: %f, source1_lat: %f, source1_long: %f \n ", src1[0].latitude, src1[0].longitude, school[1].latitude, school[1].longitude);
    // printf("Distance between the two points: %f\n", dist_between_two_points(src1[0], school[1]));
   
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(src1[0], school[0]), 0.323205);          // ENGR : MLK LIbrary
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(src1[0], school[1]), 0.514917);          // ENGR : Science Building
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(src1[0], school[2]), 0.215741);          // ENGR : Tower Hall
    TEST_ASSERT_EQUAL_FLOAT(dist_between_two_points(src1[0], school[3]), 0.091721);          // ENGR : EE DEPT
    TEST_ASSERT_EQUAL(dist_between_two_points(src1[0], school[3]), 0.316397);                // ENGR : EE DEPT

    TEST_ASSERT_EQUAL(return_closest_node(src1[0], school), 3);                              // ENGR : ENGR
    TEST_ASSERT_EQUAL(return_closest_node(src1[1], school), 3);                              // Chase ATM : EE ENGR
    TEST_ASSERT_EQUAL(return_closest_node(src1[2], school), 3);                              // Village Market : EE ENGR

    TEST_ASSERT_EQUAL(return_closest_node(src2[0], school), 2);                              // Event Center :: Tower hall
    TEST_ASSERT_EQUAL(return_closest_node(src2[1], school), 2);                              // Police dept :: Tower hall 
    TEST_ASSERT_EQUAL(return_closest_node(src2[2], school), 1);                              // Duncan Hall :: Science Building
    TEST_ASSERT_EQUAL(return_closest_node(src2[3], school), 1);                              // MacQuarrie Hall :: Science Building
    TEST_ASSERT_EQUAL(return_closest_node(src2[4], school), 0);                              // Flames Eatery :: MLK Library
}

void test_dijkistra_path(void)
{
    // int graph2[][6] = 
    // {
    //     {0, 3, 9999, 8, 5, 9999},
    //     {3, 0, 1, 9999, 2, 9999}, 
    //     {9999, 1, 0, 9999, 9, 10},
    //     {8, 9999, 9999, 0, 7, 9999}, 
    //     {5, 2, 9, 7, 0, 1},
    //     {9999, 9999, 10, 9999, 1, 0}
    // };

    // int return_arr[6] = {0};

    printf("DJKISTRA'S DY\n");
    // dijkstra_dy(graph2, 0, 8, return_arr);
    // dijkstra_dy(graph2, 0, 0, return_arr);
    // dijkstra_dy(graph2, 0, 1, return_arr);
    // dijkstra_dy(graph2, 0, 3, return_arr);
    // dijkstra_dy(graph2, 0, 4, return_arr);
    // dijkstra_dy(graph2, 0, 2, return_arr, sizeof(return_arr)/sizeof(int));
    // dijkstra_dy(graph2, 5, 0, return_arr, sizeof(return_arr)/sizeof(int));
    // dijkstra_dy(graph2, 3, 2, return_arr, sizeof(return_arr)/sizeof(int));
    // printf("Size of Array: %i\n", sizeof(return_arr)/sizeof(int));

    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr[0], return_arr[1], return_arr[2], return_arr[3], return_arr[4], return_arr[5]);

    // int graph3[][16] = 
    // {
    //     {0.0,146.74189686775208,116.96620285511017,117.36885458230972,119.4201186299324,122.45618551969528,118.94314736127853,157.85761177539825,170.41295766830444,67.70128011703491,5.147126503288746,16.09206758439541,28.066275641322136,36.38061508536339,41.80949926376343,0.0},
    //     {146.74189686775208,0.0,31.40849620103836,30.30766360461712,29.59458716213703,35.10928899049759,51.230963319540024,116.16735905408859,144.796684384346,79.05596494674683,143.6532586812973,161.98229789733887,171.73168063163757,182.57524073123932,188.32194805145264,146.74189686775208},
    //     {116.96620285511017,31.40849620103836,0.0,15.603589825332165,19.311951473355293,32.181691378355026,47.31171578168869,119.93851512670517,147.10482954978943,49.55987259745598,113.58273029327393,131.82151317596436,141.144260764122,153.15499901771545,158.74792635440826,116.96620285511017},
    //     {117.36885458230972,30.30766360461712,15.603589825332165,0.0,4.002123139798641,16.669709235429764,31.87493607401848,104.38080132007599,131.67844712734222,50.08663237094879,114.53799903392792,132.88064301013947,143.08661222457886,152.87785232067108,158.7029993534088,117.36885458230972},
    //     {119.4201186299324,29.59458716213703,19.311951473355293,4.002123139798641,0.0,12.871621176600456,28.685716912150383,100.91385990381241,128.3738762140274,52.51840874552727,116.71528965234756,135.0419521331787,145.41734755039215,154.71196174621582,160.581573843956,119.4201186299324},
    //     {122.45618551969528,35.10928899049759,32.181691378355026,16.669709235429764,12.871621176600456,0.0,16.979848966002464,88.24571967124939,115.91680347919464,57.840149849653244,120.2208548784256,138.37864995002747,149.3223011493683,156.78778290748596,162.79031336307526,122.45618551969528},
    //     {118.94314736127853,51.230963319540024,47.31171578168869,31.87493607401848,28.685716912150383,16.979848966002464,0.0,72.71819561719894,99.8111218214035,59.6897192299366,117.37380176782608,135.03322005271912,146.61192893981934,151.5808254480362,157.697856426239,118.94314736127853},
    //     {157.85761177539825,116.16735905408859,119.93851512670517,104.38080132007599,100.91385990381241,88.24571967124939,72.71819561719894,0.0,28.76129373908043,120.55637687444687,158.564493060112,172.5820004940033,185.0908398628235,180.84430694580078,186.79305911064148,157.85761177539825},
    //     {170.41295766830444,144.796684384346,147.10482954978943,131.67844712734222,128.3738762140274,115.91680347919464,99.8111218214035,28.76129373908043,0.0,142.3252820968628,171.90447449684143,183.9749962091446,196.34555280208588,188.78863751888275,194.4323182106018,170.41295766830444},
    //     {67.70128011703491,79.05596494674683,49.55987259745598,50.08663237094879,52.51840874552727,57.840149849653244,59.6897192299366,120.55637687444687,142.3252820968628,0.0,64.61700052022934,82.95759558677673,93.00497174263,103.70609909296036,109.3732938170433,67.70128011703491},
    //     {5.147126503288746,143.6532586812973,113.58273029327393,114.53799903392792,116.71528965234756,120.2208548784256,117.37380176782608,158.564493060112,171.90447449684143,64.61700052022934,0.0,18.345855176448822,29.248187318444252,40.3955914080143,45.56466266512871,5.147126503288746},
    //     {16.09206758439541,161.98229789733887,131.82151317596436,132.88064301013947,135.0419521331787,138.37864995002747,135.03322005271912,172.5820004940033,183.9749962091446,82.95759558677673,18.345855176448822,0.0,12.509024702012539,24.019993841648102,28.33559736609459,16.09206758439541},
    //     {28.066275641322136,171.73168063163757,141.144260764122,143.08661222457886,145.41734755039215,149.3223011493683,146.61192893981934,185.0908398628235,196.34555280208588,93.00497174263,29.248187318444252,12.509024702012539,0.0,23.67292530834675,25.37485584616661,28.066275641322136},
    //     {36.38061508536339,182.57524073123932,153.15499901771545,152.87785232067108,154.71196174621582,156.78778290748596,151.5808254480362,180.84430694580078,188.78863751888275,103.70609909296036,40.3955914080143,24.019993841648102,23.67292530834675,0.0,6.168906111270189,36.38061508536339},
    //     {41.80949926376343,188.32194805145264,158.74792635440826,158.7029993534088,160.581573843956,162.79031336307526,157.697856426239,186.79305911064148,194.4323182106018,109.3732938170433,45.56466266512871,28.33559736609459,25.37485584616661,6.168906111270189,0.0,41.80949926376343},
    //     {0.0,146.74189686775208,116.96620285511017,117.36885458230972,119.4201186299324,122.45618551969528,118.94314736127853,157.85761177539825,170.41295766830444,67.70128011703491,5.147126503288746,16.09206758439541,28.066275641322136,36.38061508536339,41.80949926376343,0.0},
    // };

    int graph3[][16] = 
    {
        {0.0,146.74189686775208,116.96620285511017,117.36885458230972,119.4201186299324,122.45618551969528,118.94314736127853,157.85761177539825,170.41295766830444,67.70128011703491,5.147126503288746,16.09206758439541,28.066275641322136,36.38061508536339,41.80949926376343},
        {146.74189686775208,0.0,31.40849620103836,30.30766360461712,29.59458716213703,35.10928899049759,51.230963319540024,116.16735905408859,144.796684384346,79.05596494674683,143.6532586812973,161.98229789733887,171.73168063163757,182.57524073123932,188.32194805145264},
        {116.96620285511017,31.40849620103836,0.0,15.603589825332165,19.311951473355293,32.181691378355026,47.31171578168869,119.93851512670517,147.10482954978943,49.55987259745598,113.58273029327393,131.82151317596436,141.144260764122,153.15499901771545,158.74792635440826},
        {117.36885458230972,30.30766360461712,15.603589825332165,0.0,4.002123139798641,16.669709235429764,31.87493607401848,104.38080132007599,131.67844712734222,50.08663237094879,114.53799903392792,132.88064301013947,143.08661222457886,152.87785232067108,158.7029993534088},
        {119.4201186299324,29.59458716213703,19.311951473355293,4.002123139798641,0.0,12.871621176600456,28.685716912150383,100.91385990381241,128.3738762140274,52.51840874552727,116.71528965234756,135.0419521331787,145.41734755039215,154.71196174621582,160.581573843956},
        {122.45618551969528,35.10928899049759,32.181691378355026,16.669709235429764,12.871621176600456,0.0,16.979848966002464,88.24571967124939,115.91680347919464,57.840149849653244,120.2208548784256,138.37864995002747,149.3223011493683,156.78778290748596,162.79031336307526},
        {118.94314736127853,51.230963319540024,47.31171578168869,31.87493607401848,28.685716912150383,16.979848966002464,0.0,72.71819561719894,99.8111218214035,59.6897192299366,117.37380176782608,135.03322005271912,146.61192893981934,151.5808254480362,157.697856426239},
        {157.85761177539825,116.16735905408859,119.93851512670517,104.38080132007599,100.91385990381241,88.24571967124939,72.71819561719894,0.0,28.76129373908043,120.55637687444687,158.564493060112,172.5820004940033,185.0908398628235,180.84430694580078,186.79305911064148},
        {170.41295766830444,144.796684384346,147.10482954978943,131.67844712734222,128.3738762140274,115.91680347919464,99.8111218214035,28.76129373908043,0.0,142.3252820968628,171.90447449684143,183.9749962091446,196.34555280208588,188.78863751888275,194.4323182106018},
        {67.70128011703491,79.05596494674683,49.55987259745598,50.08663237094879,52.51840874552727,57.840149849653244,59.6897192299366,120.55637687444687,142.3252820968628,0.0,64.61700052022934,82.95759558677673,93.00497174263,103.70609909296036,109.3732938170433},
        {5.147126503288746,143.6532586812973,113.58273029327393,114.53799903392792,116.71528965234756,120.2208548784256,117.37380176782608,158.564493060112,171.90447449684143,64.61700052022934,0.0,18.345855176448822,29.248187318444252,40.3955914080143,45.56466266512871},
        {16.09206758439541,161.98229789733887,131.82151317596436,132.88064301013947,135.0419521331787,138.37864995002747,135.03322005271912,172.5820004940033,183.9749962091446,82.95759558677673,18.345855176448822,0.0,12.509024702012539,24.019993841648102,28.33559736609459},
        {28.066275641322136,171.73168063163757,141.144260764122,143.08661222457886,145.41734755039215,149.3223011493683,146.61192893981934,185.0908398628235,196.34555280208588,93.00497174263,29.248187318444252,12.509024702012539,0.0,23.67292530834675,25.37485584616661},
        {36.38061508536339,182.57524073123932,153.15499901771545,152.87785232067108,154.71196174621582,156.78778290748596,151.5808254480362,180.84430694580078,188.78863751888275,103.70609909296036,40.3955914080143,24.019993841648102,23.67292530834675,0.0,6.168906111270189},
        {41.80949926376343,188.32194805145264,158.74792635440826,158.7029993534088,160.581573843956,162.79031336307526,157.697856426239,186.79305911064148,194.4323182106018,109.3732938170433,45.56466266512871,28.33559736609459,25.37485584616661,6.168906111270189,0.0},
    };
    
    int return_arr2[16] = {0};
    for(int i = 0; i < 16; i++)
    {
        for(int j = 0; j < 16; j++)
        {
            // printf("Graph3: i%i: j:%i -> %i\n",i, j, graph3[i][j]);
            dijkstra_dy(graph3, i, j, return_arr2, sizeof(return_arr2)/sizeof(int)); 
            printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
        }
    }


    // dijkstra_dy(graph3, 0, 1, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 2, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 3, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 4, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 5, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 6, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 7, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 8, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 9, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 10, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 11, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 12, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 13, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 14, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);
    // dijkstra_dy(graph3, 0, 15, return_arr2, sizeof(return_arr2)/sizeof(int)); 
    // printf("[0]: %i -> [1]: %i -> [2]: %i -> [3]: %i -> [4]: %i -> [5]: %i \n", return_arr2[0], return_arr2[1], return_arr2[2], return_arr2[3], return_arr2[4], return_arr2[5]);







    // printf("size of array: %i\n", sizeof(return_arr)); 
    // TEST_ASSERT_EQUAL_INT_ARRAY(return_arr, p, 3, return_arr);
}
